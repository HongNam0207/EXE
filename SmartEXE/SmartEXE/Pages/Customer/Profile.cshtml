@page
@model SmartEXE.Pages.Customer.ProfileModel
@{
    Layout = null;
    ViewData["Title"] = "Thông tin cá nhân";
}

<head>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <style>
        body {
            background: linear-gradient(135deg, #74d0c0, #0a5275);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>

<body>
    <div class="card shadow-lg border-0 rounded-4" style="max-width:500px; width:100%;">
        <div class="card-header text-white text-center rounded-top-4" style="background-color:#0a5275;">
            <h4 class="mb-0 fw-bold" style="font-family: 'Montserrat', sans-serif;">Thông tin cá nhân</h4>
        </div>
        <div class="card-body p-4">

            @if (!string.IsNullOrEmpty(Model.SuccessMessage))
            {
                <div class="alert alert-success">@Model.SuccessMessage</div>
            }

            <form method="post">
                <div class="text-center mb-3">
                    <img src="@Model.Profile.AvatarUrl" class="rounded-circle border"
                         style="width:120px;height:120px;object-fit:cover;" alt="Avatar" />
                </div>

                <div class="mb-3">
                    <label asp-for="Profile.Name" class="form-label fw-bold text-dark">Họ tên</label>
                    <input asp-for="Profile.Name" class="form-control rounded-3 p-2" />
                    <span asp-validation-for="Profile.Name" class="text-danger"></span>
                </div>

                <div class="mb-3">
                    <label asp-for="Profile.Email" class="form-label fw-bold text-dark">Email</label>
                    <input asp-for="Profile.Email" class="form-control rounded-3 p-2" readonly />
                </div>

                <button type="submit"
                        class="btn w-100 rounded-pill mb-2 fw-semibold"
                        style="background-color:#0a5275; color:white;">
                    <i class="bi bi-save me-2"></i> Lưu thay đổi
                </button>
            </form>

            <button class="btn w-100 rounded-pill fw-semibold"
                    data-bs-toggle="modal"
                    data-bs-target="#changePasswordModal"
                    style="background-color:#74d0c0; color:#072d44;">
                <i class="bi bi-key me-2"></i> Đổi mật khẩu
            </button>
        </div>
    </div>

    <!-- Modal Đổi mật khẩu -->
    <div class="modal fade" id="changePasswordModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content rounded-4 shadow-lg">
                <div class="modal-header text-white rounded-top-4" style="background-color:#74d0c0;">
                    <h5 class="modal-title">
                        <i class="bi bi-key-fill me-2"></i> Đổi mật khẩu
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body p-4">
                    <form method="post" asp-page-handler="ChangePassword">
                        <div class="mb-3">
                            <label asp-for="ChangePassword.OldPassword" class="form-label fw-bold text-dark"></label>
                            <input asp-for="ChangePassword.OldPassword" class="form-control rounded-3" />
                            <span asp-validation-for="ChangePassword.OldPassword" class="text-danger"></span>
                        </div>

                        <div class="mb-3">
                            <label asp-for="ChangePassword.NewPassword" class="form-label fw-bold text-dark"></label>
                            <input asp-for="ChangePassword.NewPassword" class="form-control rounded-3" />
                            <span asp-validation-for="ChangePassword.NewPassword" class="text-danger"></span>
                        </div>

                        <div class="mb-3">
                            <label asp-for="ChangePassword.ConfirmPassword" class="form-label fw-bold text-dark"></label>
                            <input asp-for="ChangePassword.ConfirmPassword" class="form-control rounded-3" />
                            <span asp-validation-for="ChangePassword.ConfirmPassword" class="text-danger"></span>
                        </div>

                        <button type="submit" class="btn w-100 rounded-pill fw-semibold"
                                style="background-color:#0a5275; color:white;">
                            <i class="bi bi-check-circle me-2"></i> Xác nhận đổi mật khẩu
                        </button>
                    </form>

                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    @section Scripts {
        <partial name="_ValidationScriptsPartial" />
    }
</body>
