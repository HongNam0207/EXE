@page
@{
    Layout = null;
}

<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>FPT Campus Explorer - AILENS</title>

    <!-- CSS FILES -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600;700&family=Open+Sans&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="~/css/bootstrap.min.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/bootstrap-icons.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/templatemo-topic-listing.css" asp-append-version="true" />
    <style>
        /* 🔹 Khung danh sách gợi ý */
        #suggestion-list {
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            background-color: #fff;
            border-radius: 12px;
            margin-top: 6px;
            padding: 6px 0;
            box-shadow: 0 4px 18px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            display: none;
            overflow: hidden;
        }

            /* 🔹 Item gợi ý */
            #suggestion-list li {
                display: flex;
                align-items: center;
                justify-content: flex-start; /* 👈 Căn toàn bộ nội dung về bên trái */
                gap: 10px;
                padding: 10px 18px;
                font-size: 16px;
                color: #202124;
                cursor: pointer;
                text-align: left; /* 👈 Đảm bảo text nằm về trái */
                transition: all 0.2s ease;
            }

                /* 🔹 Viền ngăn cách */
                #suggestion-list li + li {
                    border-top: 1px solid #f1f3f4;
                }

                /* 🔹 Hover hiệu ứng */
                #suggestion-list li:hover {
                    background-color: #f1f3f4;
                }

            /* 🔹 Cuộn mượt (nếu danh sách dài) */
            #suggestion-list::-webkit-scrollbar {
                width: 6px;
            }

            #suggestion-list::-webkit-scrollbar-thumb {
                background: #d6d6d6;
                border-radius: 8px;
            }

    </style>

</head>

<body id="top">
    <main>
        <!-- NAVBAR -->
        <nav class="navbar navbar-expand-lg">
            <div class="container">
                <a class="navbar-brand" asp-page="/Customer/Home">
                    <i class="bi-back"></i>
                    <span>AILENS</span>
                </a>

                <div class="d-lg-none ms-auto me-4">
                    <a asp-page="/Common/Login" class="navbar-icon bi-person"></a>
                </div>

                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-lg-5 me-lg-auto">
                        <li class="nav-item"><a class="nav-link click-scroll" href="#section_1">Trang chủ</a></li>
                        <li class="nav-item"><a class="nav-link click-scroll" href="#section_2">Chủ đề</a></li>
                        <li class="nav-item"><a class="nav-link click-scroll" href="#section_3">Cách hoạt động</a></li>
                        <li class="nav-item"><a class="nav-link click-scroll" href="#section_4">Câu hỏi thường gặp</a></li>
                        <li class="nav-item"><a class="nav-link click-scroll" href="#section_5">Liên hệ</a></li>
                        <li class="nav-item"><a class="nav-link click-scroll" href="#section_6">Dịch vụ</a></li>
                    </ul>
                    <div class="d-none d-lg-block">
                        <a asp-page="/Common/Login" class="navbar-icon bi-person"></a>
                    </div>
                </div>
            </div>
        </nav>

        <!-- HERO SECTION -->
        <section class="hero-section d-flex justify-content-center align-items-center" id="section_1">
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-12 mx-auto text-center">
                        <h1 class="text-white">Khám phá - Kết nối</h1>
                        <h6 style="color: #072D44;">Nền tảng AI khám phá khuôn viên thông minh FPT</h6>

                        <form method="get" class="custom-form mt-4 pt-2 mb-lg-0 mb-5" role="search" onsubmit="return goToMap(event)">
                            <div class="input-group input-group-lg position-relative">
                                <span class="input-group-text bi-search" id="basic-addon1"></span>
                                <input name="keyword" type="search" class="form-control" id="keyword"
                                       placeholder="Giảng đường, Ký túc xá, Căng tin, Thư viện ..."
                                       aria-label="Search" autocomplete="off" oninput="showSuggestions()">
                                <button type="submit" class="form-control">Tìm kiếm</button>

                                <!-- Gợi ý -->
                                <ul id="suggestion-list" class="list-group position-absolute w-100 shadow"
                                    style="top: 100%; z-index: 1000; display: none;"></ul>
                            </div>
                        </form>

                    </div>
                </div>
            </div>
        </section>

        <!-- EXPLORE TOOLS -->
        <section class="explore-section section-padding" id="section_2">
            <div class="container text-center mb-4">
                <h2>Khám phá các công cụ AI hỗ trợ</h2>
            </div>

            <div class="container">
                <div class="row g-4">
                    <!-- Bản đồ -->
                    <div class="col-lg-6 col-md-6 col-12">
                        <div class="custom-block bg-white shadow-lg">
                            <a asp-page="/Customer/Map">
                                <div class="d-flex">
                                    <div>
                                        <h5 class="mb-2">🗺️ Bản đồ nội khu</h5>
                                        <p class="mb-0">Hệ thống bản đồ thông minh giúp bạn định vị và chỉ đường trong trường</p>
                                    </div>
                                    <span class="badge bg-warning rounded-pill ms-auto">Hot</span>
                                </div>
                               @*  <img src="https://scontent.fhan19-1.fna.fbcdn.net/v/t39.30808-6/484176493_9314250981994998_5962696195847368675_n.jpg"
                                     class="custom-block-image img-fluid" alt="Bản đồ nội khu FPT"> *@
                            </a>
                        </div>
                    </div>

                    <!-- Camera -->
                    <div class="col-lg-6 col-md-6 col-12">
                        <div class="custom-block bg-white shadow-lg">
                            <a asp-page="/Customer/Scanner">
                                <div class="d-flex">
                                    <div>
                                        <h5 class="mb-2">📷 Quét bằng Camera</h5>
                                        <p class="mb-0">Hướng camera đến vị trí bất kỳ để nhận diện cảnh quan bằng AI</p>
                                    </div>
                                    <span class="badge bg-primary rounded-pill ms-auto">AI</span>
                                </div>
                               @* <img src="~/images/topics/IMG_0187.jpg" class="custom-block-image img-fluid" alt="Quét bằng Camera AI"> *@
                            </a>
                        </div>
                    </div>

                    <!-- Chatbot -->
                    <div class="col-lg-6 col-md-6 col-12">
                        <div class="custom-block bg-white shadow-lg">
                            <a asp-page="/Customer/Chatbot">
                                <div class="d-flex">
                                    <div>
                                        <h5 class="mb-2">🤖 Trợ lý ảo AI</h5>
                                        <p class="mb-0">Giao tiếp tự nhiên để hỏi thông tin lịch học, phòng học, tiện ích,...</p>
                                    </div>
                                    <span class="badge bg-info rounded-pill ms-auto">Beta</span>
                                </div>
                                <img src="https://vbee.vn/blog/wp-content/uploads/2023/12/tro-ly-ao.webp"
                                     class="custom-block-image img-fluid" alt="Trợ lý ảo AI">
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- FOOTER -->
    <footer class="site-footer section-padding">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-12 mb-4 pb-2">
                    <a class="navbar-brand mb-2" asp-page="/Customer/Home">
                        <i class="bi-back"></i>
                        <span>AILENS</span>
                    </a>
                </div>

                <div class="col-lg-3 col-md-4 col-6">
                    <h6 class="site-footer-title mb-3">Mục lục</h6>
                    <ul class="site-footer-links">
                        <li><a href="#section_2" class="site-footer-link">Chủ đề</a></li>
                        <li><a href="#section_3" class="site-footer-link">Cách hoạt động</a></li>
                        <li><a href="#section_4" class="site-footer-link">FAQs</a></li>
                        <li><a href="#section_5" class="site-footer-link">Liên hệ</a></li>
                    </ul>
                </div>

                <div class="col-lg-3 col-md-4 col-6 mb-4 mb-lg-0">
                    <h6 class="site-footer-title mb-3">Thông tin</h6>
                    <p class="text-white d-flex mb-1"><a href="tel:0123456789" class="site-footer-link">0123 456 789</a></p>
                    <p class="text-white d-flex"><a href="mailto:info@ailens.com" class="site-footer-link">info@ailens.com</a></p>
                </div>
            </div>
        </div>
    </footer>

    <!-- JAVASCRIPT FILES -->
    <script src="~/js/jquery.min.js"></script>
    <script src="~/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/jquery.sticky.js"></script>
    <script src="~/js/click-scroll.js"></script>
    <script src="~/js/custom.js"></script>

    <!-- 🔹 Kommunicate Chatbot -->
    <script type="text/javascript">
            (function(d, m){
                var kommunicateSettings =
                    {"appId":"2cf5d98275558a410b2d177a87e695b05","popupWidget":true,"automaticChatOpenOnNavigation":true};
                var s = document.createElement("script"); s.type = "text/javascript"; s.async = true;
                s.src = "https://widget.kommunicate.io/v2/kommunicate.app";
                var h = document.getElementsByTagName("head")[0]; h.appendChild(s);
                window.kommunicate = m; m._globals = kommunicateSettings;
            })(document, window.kommunicate || {});
        /* NOTE : Use web server to view HTML files as real-time update will not work if you directly open the HTML file in the browser. */
    </script>


    <!-- 🔹 Chuyển sang trang bản đồ khi tìm kiếm -->
    <script>
        function goToMap(e) {
            e.preventDefault();
            const keyword = document.getElementById("keyword").value.trim();
            if (keyword)
                window.location.href = `/Customer/Map?search=${encodeURIComponent(keyword)}#campusMap`;
            return false;
        }
    </script>

    <script>
        // Danh sách gợi ý mẫu — bạn có thể load từ DB sau này
        const locations = [
            "Dom A",
            "Dom B",
            "Dom C",
            "Căng tin 1",
            "Căng tin 2",
            "Hồ Đá",
            "Hồ Đào Cốc",
            "Thư viện",
            "Giảng đường Alpha",
            "Giảng đường Beta",
            "Sân bóng FPT",
            "Ký túc xá Nam",
            "Ký túc xá Nữ"
        ];

        function showSuggestions() {
            const input = document.getElementById("keyword");
            const list = document.getElementById("suggestion-list");
            const query = input.value.trim().toLowerCase();
            list.innerHTML = "";

            if (!query) {
                list.style.display = "none";
                return;
            }

            // Lọc các gợi ý khớp
            const filtered = locations.filter(loc => loc.toLowerCase().includes(query));
            if (filtered.length === 0) {
                list.style.display = "none";
                return;
            }

            // Hiển thị danh sách gợi ý
            filtered.forEach(item => {
                const li = document.createElement("li");
                li.classList.add("list-group-item", "list-group-item-action");
                li.textContent = item;
                li.addEventListener("click", () => {
                    input.value = item;
                    list.style.display = "none";
                });
                list.appendChild(li);
            });
            list.style.display = "block";
        }

        // Ẩn gợi ý khi click ra ngoài
        document.addEventListener("click", function (e) {
            const list = document.getElementById("suggestion-list");
            if (!document.getElementById("keyword").contains(e.target)) {
                list.style.display = "none";
            }
        });

        // Hàm điều hướng khi tìm kiếm
        function goToMap(e) {
            e.preventDefault();
            const keyword = document.getElementById("keyword").value.trim();
            if (keyword)
                window.location.href = `/Customer/Map?search=${encodeURIComponent(keyword)}#campusMap`;
            return false;
        }
    </script>


</body>
</html>
